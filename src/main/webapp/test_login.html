<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>司机登录</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="resources/jquery/jquery-1.8.1.min.js"></script> 
	<style>
	*{margin:0;padding:0;}
	body{font-size:1rem;line-height:1.4rem;}
	.fl{float:left;}
	 .dl{width:92%;padding:0 4%;}
	 .dl{}
	 .pr{width:100%;height:2rem;position:relative;}
	 .pa{position:absolute;}
	 .phone-img{left:2%;top:0.2rem;}
	 .input{width:85%;height:2rem;padding-left:15%;border-radius:5px;border:1px solid #bbb;margin-bottom:1.5rem;}
	 .login-img{text-align:center;margin:2rem 0;}
	 .hq-text{width:52%;height:2rem;border-radius:5px;border:1px solid #bbb;text-aling:left;padding-left:5%;}	.hq-an{width:37%;margin-left:3%;height:2rem;border:none;background:none;color:#60c05f;font-size:1.1rem;}
	 .clear{clear:both;}
	 .wz{width:40%;text-align:right;}
	 .qd{width:100%;height:2rem;background:#60c05f;color:#fff;border:none;margin-top:1.5rem;}
	</style>
    <script>
    	var binduserfn = function(){
			$(".qd").css("background","#ccc");
    		$.ajax({
	    		url:'/profile/driver/login',
	    		data:{
	    			'driverMobile':$('#driverMobile').val(),
	    			'checkNo':$('#checkNo').val()
	    		},
	    		success:function(data){
	    			if(data.s==0){
						alert("登录失败：" + data.m)
						$(".qd").css("background","#60c05f");
	    				return ;
	    			}
	    			if(window.localStorage){
	    				window.localStorage.driverId = data.driverId;
	    			}
	    			alert('登录成功');
	    			window.location.href = "/wap/index.html";
	    		}
	    	});
    	}
    	$(function(){
			$(".hq-an").click(function(){
			    var _this = $(this);
				if($("#driverMobile").val() == ""){
					alert("请输入手机号");
					return;
				}
				$.ajax({
					url:'/profile/driver/sendcheckno',
					data:{driverMobile:$("#driverMobile").val()},
					dataType:'json',
					success:function(data){
						if(data.s == 0){
							//alert("请求验证码失败："+data.m)
							return;
						}
						alert("已将验证码发送至您的手机")
						_this.attr("disabled","true");
						_this.css("color","#ccc");
						
						setTimeout(function(){
							_this.removeAttr("disabled");
							_this.css("color","#60c05f")
						},60000);

					}
				})
				
			});
    	})
	
    </script>  
	
  </head>  
  <body> 
  		<section class="dl">
			<div id='openId' hidden></div>
			<div class="login-img">
				<img src="../images/login-img.png" width="25%" />
			</div>
			<div class="pr">
			<input type="tel" name="tel" class="fl input" id='driverMobile' placeholder="输入手机号"/>
			<img src="../images/phone.png" width="10%" class="phone-img pa" />
			</div>
			<div class="clear">
			<input type="tel" name="tel" class="fl hq-text" id='checkNo'  placeholder="输入验证码"/><button  class="fl hq-an">获取验证码</button>
			</div>
			<div class="clear">
			<input type='button' value='登录' class="qd" onclick='binduserfn();'/>
			</div>
		</section>
  </body>
</html>
